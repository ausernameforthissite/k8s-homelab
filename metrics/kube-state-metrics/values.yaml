
fullnameOverride: ksm
selfMonitor:
  enabled: true
prometheus:
  monitor:
    enabled: false

replicas: 2

# Available collectors for kube-state-metrics.
# By default, all available resources are enabled, comment out to disable.
collectors:
- certificatesigningrequests
# - configmaps
- cronjobs
- daemonsets
- deployments
# - endpoints
# - endpointslices
- horizontalpodautoscalers
# - ingresses
- jobs
- leases
- limitranges
# - mutatingwebhookconfigurations
- namespaces
# - networkpolicies
- nodes
- persistentvolumeclaims
- persistentvolumes
- poddisruptionbudgets
- pods
- replicasets
- replicationcontrollers
- resourcequotas
# - secrets
- services
- statefulsets
- storageclasses
# - validatingwebhookconfigurations
# - volumeattachments
# - ingressclasses
# - clusterrolebindings
# - clusterroles
# - roles

resources:
  requests:
    cpu: 10m
    memory: 50Mi
  limits:
    cpu: 50m
    # on restart memory usage is much higher than on average, and with 64Mi limit ksm frequently failed to start
    memory: 128Mi

podLabels:
  cgroup.meoe.io/burst: enable
podAnnotations:
  cgroup.meoe.io/burst: kube-state-metrics=100ms

startupProbe:
  enabled: true
  failureThreshold: 30
  initialDelaySeconds: 0
  periodSeconds: 1

livenessProbe:
  initialDelaySeconds: 0

readinessProbe:
  initialDelaySeconds: 0
